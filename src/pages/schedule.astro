---
import MainLayout from '../layouts/MainLayout.astro';

const schedule = [
  {
    day: "Monday",
    time: "19:30",
    duration: "60 min",
    className: "TABATA",
    instructor: "MIHNEA P.",
    image: "/images/mihnea.png",
    level: "Open Level",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships" 
  },
  {
    day: "Monday",
    time: "20:30",
    duration: "60 min",
    className: "URBAN CHOREO",
    instructor: "PETRINI M.",
    image: "/instructors/petrini.png",
    level: "Open Level",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships" 
  },
  {
    day: "Tuesday",
    time: "19:30",
    duration: "90 min",
    className: "BACHATA",
    instructor: "ANA and ED",
    image: "/instructors/AnaEd.png",
    level: "Intermediate 1",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships"
  },
  {
    day: "Tuesday",
    time: "21:00",
    duration: "90 min",
    className: "BACHATA",
    instructor: "ANA and ED",
    image: "/instructors/AnaEd.png",
    level: "Intermediate-advanced",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships"
  },
  {
    day: "Wednesday",
    time: "20:00",
    duration: "60 min",
    className: "CIRCUIT TRAINING",
    instructor: "IVANA",
    image: "/instructors/Ivana.png",
    level: "Open Level",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships"
  },
  {
    day: "Wednesday",
    time: "21:00",
    duration: "60 min",
    className: "AERIAL YOGA",
    instructor: "RAMONA",
    image: "/instructors/ramonaweb.png",
    level: "Beginner",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships"
  },
  {
    day: "Thursday",
    time: "20:00",
    duration: "60 min",
    className: "BALLET",
    instructor: "SASHA",
    image: "/instructors/sashaweb.png",
    level: "Beginner",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships"
  },
  {
    day: "Thursday",
    time: "21:00",
    duration: "60 min",
    className: "STRETCHING",
    instructor: "SASHA",
    image: "/instructors/sashaweb.png",
    level: "Open Level",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships"
  },
  {
    day: "Friday",
    time: "From 19:00",
    duration: "2h:30min",
    className: "PRACTICE SESSION",
    instructor: "DJ EDDY",
    image: "/instructors/Ed.png",
    level: "ALL LEVELS",
    room: "Room 1",
    status: "Available",
    bookingLink: "/memberships/dance"
  },
  {
    day: "Friday",
    time: "From 19:00",
    duration: "60 min",
    className: "SALSA MODULE FUNDAMENTALS ON 2",
    instructor: "CLAUDIU AND LILI",
    image: "/instructors/claudiuliliweb.png",
    level: "Intermediate",
    room: "Room 1",
    status: "30 spots available",
    bookingLink: "/memberships/workshops"
  },
  {
    day: "Friday",
    time: "From 20:00",
    duration: "60 min",
    className: "SALSA MODULE FLAVOURS OF SALSA",
    instructor: "CLAUDIU AND LILI",
    image: "/instructors/claudiuliliweb.png",
    level: "Inter-Advanced",
    room: "Room 1",
    status: "30 spots available",
    bookingLink: "/memberships/workshops"
  }
];

const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
---

<MainLayout title="Schedule | Utopia">
  <main class="relative min-h-screen max-w-5xl mx-auto px-6 py-24 z-10">
    
    <div class="absolute top-10 left-6 md:left-0 z-50">
        <a href="/home" class="inline-flex items-center text-gray-500 hover:text-gold transition-colors group uppercase text-[10px] tracking-[0.3em]">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 group-hover:-translate-x-1 transition-transform">
                <path d="m15 18-6-6 6-6"/>
            </svg>
            Back Home
        </a>
    </div>

    <div class="text-center mb-16">
      <h1 class="font-thin tracking-[0.4em] uppercase text-white mb-4 text-2xl md:text-3xl">
        WEEKLY <span class="text-gold italic">SCHEDULE</span>
      </h1>
      <div class="h-px w-24 bg-[#0F393D] mx-auto mt-6 opacity-60"></div>
    </div>

    <div class="flex flex-wrap justify-center gap-3 mb-16">
      {days.map((day) => (
        <button 
          class="day-filter px-6 py-2 rounded-full border border-[#0F393D]/30 text-[10px] tracking-[0.2em] uppercase transition-all duration-300 text-gray-500 hover:text-white hover:border-[#0F393D]"
          data-day={day}
        >
          {day.substring(0, 3)}
        </button>
      ))}
    </div>

    <div class="space-y-4">
      {schedule.map((item) => (
        <div 
          class="schedule-item bg-[#0a0a0a] border border-[#0F393D]/30 p-6 md:p-8 rounded-2xl flex flex-col md:flex-row md:items-center justify-between group transition-all duration-500 hover:border-[#0F393D]"
          data-day={item.day}
        >
          <div class="flex items-center gap-6 mb-4 md:mb-0">
            <div class="text-center min-w-17.5">
              <span class="block text-2xl font-light text-white leading-none">{item.time}</span>
              <span class="text-[11px] text-gray-500 uppercase tracking-widest mt-1 block">{item.duration}</span>
            </div>
            <div class="h-10 w-px bg-white/5 hidden md:block"></div>
            <div>
              <span class="block text-[11px] uppercase tracking-[0.2em] text-gray-600 mb-1">Room</span>
              <span class="text-white font-light text-sm">{item.room}</span>
            </div>
          </div>

          <div class="flex-1 md:px-12 flex items-center gap-5">
            <div class="flex-1">
              <h3 class="text-lg font-light tracking-[0.2em] text-white uppercase group-hover:text-white transition-colors">
                {item.className}
              </h3>
              <div class="flex flex-wrap gap-x-4 mt-2">
                <span class="text-[12px] text-gray-500 font-light italic">with {item.instructor}</span>
                <span class="text-[11px] uppercase tracking-[0.2em] text-gray-400 flex items-center">
                  <span class="w-2 h-2 bg-[#0F393D] rounded-full mr-2"></span> {item.level}
                </span>
              </div>
            </div>
          </div>

          <div class="mt-6 md:mt-0 flex items-center justify-end gap-4 md:gap-6">
            <div class="w-10 h-10 md:w-12 md:h-12 rounded-full border border-gold/20 overflow-hidden bg-[#111] shrink-0">
               <img 
                 src={item.image} 
                 alt={item.instructor} 
                 class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500"
               />
            </div>

            <div class="flex flex-col items-center gap-2 min-w-30">
              <span class={`text-[9px] uppercase tracking-[0.3em] text center ${item.status === 'Available' ? 'text-white/60' : 'text-gray-700'}`}>
                {item.status}
              </span>
              <a href={item.bookingLink} class="px-8 py-3 rounded-full bg-[#0F393D] border border-[#0F393D] text-white uppercase text-[10px] font-light tracking-[0.3em] transition-all duration-300 hover:bg-white hover:text-[#0F393D]">
                Book
              </a>
            </div>
          </div>
        </div>
      ))}
    </div>
  </main>
</MainLayout>

<style>
  main { font-family: 'Montserrat', sans-serif; }
  .day-filter.active {
    background-color: #0F393D !important;
    color: white !important;
    border-color: #0F393D !important;
    box-shadow: 0 0 20px rgba(15, 57, 61, 0.3);
  }
</style>

<script>
  const filters = document.querySelectorAll('.day-filter') as NodeListOf<HTMLButtonElement>;
  const items = document.querySelectorAll('.schedule-item') as NodeListOf<HTMLDivElement>;

  function filterSchedule(selectedDay: string | null): void {
    if (!selectedDay) return;
    filters.forEach(btn => btn.classList.toggle('active', btn.getAttribute('data-day') === selectedDay));
    items.forEach(item => {
      item.style.display = item.getAttribute('data-day') === selectedDay ? 'flex' : 'none';
    });
  }

  filterSchedule('Monday');

  filters.forEach(button => {
    button.addEventListener('click', () => {
      const day = button.getAttribute('data-day');
      filterSchedule(day);
    });
  });
</script>